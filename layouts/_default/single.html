{{ define "main" }}
{{ $img := .Resources.GetMatch "frame.*" }}
{{ $alt := .RawContent | plainify | strings.TrimSpace }}

<h1>{{ .Title }}</h1>

<div class="frame-single">
  {{ with $img }}
    <img src="{{ .RelPermalink }}" alt="{{ $alt }}">
  {{ end }}

  <dl class="frame-meta">
    <dt>Timestamp</dt>
    <dd>{{ .Params.timestamp }}</dd>

    <dt>Date</dt>
    <dd>{{ .Date.Format "January 2, 2006" }}</dd>

    {{ with .Params.shows }}
    <dt>Show</dt>
    <dd>{{ range $i, $s := . }}{{ if $i }}, {{ end }}<a href="{{ printf "/shows/%s/" ($s | urlize) }}">{{ $s }}</a>{{ end }}</dd>
    {{ end }}

    {{ with .Params.ppvs }}
    <dt>PPV</dt>
    <dd>{{ range $i, $p := . }}{{ if $i }}, {{ end }}<a href="{{ printf "/ppvs/%s/" ($p | urlize) }}">{{ $p }}</a>{{ end }}</dd>
    {{ end }}

    {{ with .Params.years }}
    <dt>Year</dt>
    <dd>{{ range $i, $y := . }}{{ if $i }}, {{ end }}<a href="{{ printf "/years/%s/" ($y | urlize) }}">{{ $y }}</a>{{ end }}</dd>
    {{ end }}

    {{ with $alt }}
    <dt>Alt Text</dt>
    <dd class="alt-text">{{ . }}</dd>
    {{ end }}
  </dl>
</div>
{{ end }}
